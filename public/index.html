<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Shoot game</title>
        <script src="//use.edgefonts.net/bebas-neue.js"></script>
        <link rel="stylesheet" href='assets/css/style.css'>
        </head>
        <body>
            <!-- Preloader overlay -->
            <div class="overlay">
                <div class="logo"></div>
                <div class="percentLoaded">0%</div>
                <div class="progress"></div>
            </div>
            <!-- Information overlay -->
            <div class="info">
                <h1 class="title">Which controller do you want to use?</h1>
                <div class="back-button">
                    <button>Back</button>
                </div>
                <div class="buttons">
                    <button id="leap" class="choose_button">
                    <p>A Leap Motion</p>
                    <img src="/assets/img/icons/leap2_inverted.png">
                    </button>
                    <button id="socket" class="choose_button">
                    <p>A smartphone</p>
                    <img src="/assets/img/icons/phone-rod_inverted.png">
                    </button>
                    <button id="computer" class="choose_button">
                    <p>A computer</p>
                    <img src="/assets/img/icons/eke_inverted.png">
                    </button>
                </div>
                <div class="chose hide two chose_computer">
                    <p class="margin"><strong>Move</strong> your mouse to controll the gun, <br>
                    <br>Click your mouse to <strong>fire</strong> a bullet<br>
                    </p>
                    <div class="full-width">
                        <button id="mouse" class="play">Play</button>
                    </div>
                </div>
                <div class="chose hide three chose_socket">
                    <div class="container pull-left ">
                        <p>Scan the QR Code:
                        <br>
                        <br>
                        <div id="qrcode">
                        </div>
                        </p>
                    </div>
                    <div class="container pull-center text">
                        <p class="margin">Or go to
                        <br>
                        <span class="go_to_site">http://s.kerm.is/</span>
                        <br>and enter
                        <br>
                        <span class="room_id"></span>
                        </p>
                    </div>
                    <div class="container pull-right">
                        <p class="margin">Rotate your <strong>smartphone</strong> <br > to controll the gun. <br>
                        <br>Push the <strong>trigger</strong> to
                        <br>to <strong>fire</strong> a bullet.
                        <br>
                        </p>
                    </div>
                    <div class="full-width">
                        <button class="play hide">Play</button>
                    </div>
                </div>
                <div class="chose hide two chose_leap">
                    <div class="container pull-left">
                        <video width="320" height="240" autoplay loop>
                            <source src="videos/arm.mp4" type="video/mp4">
                            <source src="videos/arm.webm" type="video/webm">
                        </video>
                    </div>
                    <div class="container pull-right width-50">
                        <p><strong>Please connect your leap motion to your computer</strong> <br >
                        <br >
                        Move your arm left and right
                        <br>to control the gun. <br ><br>
                        <br>Press <strong>space</strong>
                        <br> to fire a bullet.
                        </p>
                    </div>
                    <br>
                    <br>
                    <div class="full-width">
                        <button class="play hide">Play</button>
                    </div>
                </div>
            </div>
            <div class="pause">
                ll
            </div>

            <div class="game-over">
                <h1>Congratulations, You have finished the game!</h1>
                <strong class="message-final">You have a score of <span class="totalScoreGame"></span>, hit <span class="totalScoredGame"></span> targets and missed <span class="totalMissedGame"></span> bullets .</strong><br>
                <br>
                Would you like to add your score to the highscores?
                <br><br>
                <input type="text" placeholder="name" class="user-name">
                <br>
                <button class="score-submit">Add</button>
            </div>

            <article id="container">
                <div class="ticket-holder">
                    <div class="info-score shoot">
                        <div class="title">Shoot.kerm.is</div>
                        <div class="subtitle">Level <span class="level"></span></div>
                        <div class="down">
                            <div class="inf remaining">
                                <span class="count"></span>&nbsp;bullets remaining
                            </div>
                            <div class="inf time">
                                <span class="timeLeft"></span>&nbsp;seconds remaining
                            </div>
                            <div class="inf">Score :&nbsp;
                                <span class="score"></span>
                            </div>
                        </div>
                        <a href="#" class="next-level-button next-level level-button">Press <span>space</span> to continue &rarr;</a>
                        <a href="#" class="replay-level-button replay-level level-button">&larr; Press <span>R</span> to play again</a>
                    </div>
                </div>
                </article>


                <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
                <script src="//js.leapmotion.com/leap-0.5.0.min.js"></script>
                <script src="assets/js/libs/three.min.js"></script>
                <script src="assets/js/libs/physi.js"></script>
                <script src="assets/js/libs/socket.io.min.js"></script>
                <script src="assets/js/libs/qrcode.js"></script>
                <script src="assets/js/libs/stats.min.js"></script>
                <script src="assets/js/libs/dat.gui.min.js"></script>
                <script src="assets/js/libs/CCapture.min.js"></script>
                <script src="assets/js/libs/Whammy.js"></script>
                <script src="assets/js/libs/modernizr.custom.js"></script>
                <script src="assets/js/partials/watch.js"></script>
                <script src="assets/js/partials/sos.js"></script>
                <script src="assets/js/partials/url.js"></script>
                <script src="assets/js/partials/room.js"></script>
                <script src="assets/js/partials/main.js"></script>
                <script src="assets/js/partials/physics.js"></script>
                <script src="assets/js/partials/leap.js"></script>
                <script src="assets/js/partials/canwebuildit.js"></script>
                <script src="assets/js/partials/shoot.js"></script>
                <script src="assets/js/partials/hitboxes.js"></script>
                <script src="assets/js/partials/preload.js"></script>
                <script src="assets/js/partials/levels.js"></script>
                <script src="assets/js/partials/game.js"></script>
                <script src="assets/js/partials/eventlisteners.js"></script>
                <!-- load fonts -->
                <script src="assets/fonts/gentilis_bold.typeface.js"></script>
                <script src="assets/fonts/gentilis_regular.typeface.js"></script>
                <script src="assets/fonts/optimer_bold.typeface.js"></script>
                <script src="assets/fonts/optimer_regular.typeface.js"></script>
                <script src="assets/fonts/helvetiker_bold.typeface.js"></script>
                <script src="assets/fonts/helvetiker_regular.typeface.js"></script>
                <script src="assets/fonts/droid_sans_regular.typeface.js"></script>
                <script src="assets/fonts/droid_sans_bold.typeface.js"></script>
                <script src="assets/fonts/droid_serif_regular.typeface.js"></script>
                <script src="assets/fonts/droid_serif_bold.typeface.js"></script>
                <!-- Preload and sound stuff -->
                <script src="//code.createjs.com/preloadjs-0.4.1.min.js"></script>
                <script src="//code.createjs.com/soundjs-0.5.2.min.js"></script>
                <script>

                // $('#start').on('click', function() {
                // //look.theUserIsLockingThePointer();
                // $('.overlay').addClass('slideUp');
                // shoot.controller = 'mobile';
                // setTimeout(
                // function() {
                // // look.theUserIsLockingThePointer();
                // shoot.start = true;
                // $('.totall').addClass('active');
                // },
                // 400
                // );
                // });
                // $('#mouse').on('click', function() {
                // shoot.controller = 'mouse';
                // $('.overlay').addClass('slideUp');
                // setTimeout(
                // function() {
                // // look.theUserIsLockingThePointer();
                // shoot.start = true;
                // $('.totall').addClass('active');
                // },
                // 400
                // );
                // });
                // $('.next-level-button').on('click', function() { // .next_level!!
                //     shoot.nextLevel();
                // });
                var removeObject = [];
                function reloadScene() {
                //shoot.init();
                // console.log('scene before ', scene);
                $.each(scene.children, function(index, child) {
                if(child != undefined) {
                if(child.name == 'target' || child.name == 'constraint' || child.name == 'bullet') {
                //     console.log('remove');
                // scene.remove(child);
                removeObject.push(child);
                }
                }
                });
                for(var i = 0; i < removeObject.length; i++)
                {
                scene.remove(removeObject[i]);
                }
                bullets = [];
                //shootRings = [];
                // console.log('shootRings', basketRings);
                targets = [];
                t = 0;
                // console.log('basketRings 2', basketRings);
                //yeswecan.build_thebasket();
                yeswecan.build_thebullet();
                // console.log('shootRings 3', basketRings);
                //  console.log('scene after', scene);
                }
                // var changeRingColor = setInterval(function() {
                //     if(shoot.start) {
                //         if(!shoot.bonusColor) {
                //             console.log('random');
                //             shoot.random = Math.floor((Math.random() * shootRings.length));
                //             shoot.bonusColor = true;
                //             shootRings[shoot.random].material.color = 0x000000;
                //             console.log(shoot.random);
                //         }
                //         setTimeout(function() {
                //             console.log('remove random points', shoot.random);
                //             shootRings[shoot.random].material.color = 0xCC0030;
                //             clearInterval(changeRingColor);
                //             shoot.bonusColor = false;
                //         }, 3000 ) // (Math.random() * 15000) + 4000
                //     }
                // }, 1000); // (Math.random() * 50000) + 10000
                </script>
                <script type="text/javascript">



                function scoreTick() {
                //ticks once a second for the score, checks for remaining time
                // if (timeRemaining == 0) {
                //     game.endGame();
                // }
                // if (shoot.start) {
                // timeRemaining -= 1;
                // game.updateScoreInfo();
                //
                // setTimeout(function() {
                //     if(shoot.start){
                //          // console.log('add target', t);
                //          //    t++;
                //            requestAnimationFrame(shoot.addTargets);
                //             console.log('add target');
                //         scoreTick();
                //     }
                // }, levels[shoot.level].speed);
                }

                $(window).focus(function() {
                // console.log('focus');
                resumeRender();
                }).blur(function() {
                // console.log('blur');
                stopRender();
                });
                function stopRender() {
                // console.log('stopRender');
                shoot.rendering = false;
                shoot.start = false;
                }
                function resumeRender() {
                // console.log('resumeRender');
                shoot.start = true;
                shoot.rendering = true;
                // Check if we pressed play button and info overlay is gone
                if(!shoot.infoVisible)
                {
                scoreTick();
                }
                }

                </script>
            </body>
        </html>