<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Shoot Game</title>
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>

	<div id="container"></div>

	<!-- Three.js stuff -->
    <script src='assets/js/libs/three.min.js'></script>
    <!-- <script src="vendor/require.js/require.js"></script> -->
    <script src="assets/js/libs/three.js/examples/js/Detector.js"></script>
    <script src="assets/js/libs/threex.windowresize.js"></script>
    <script src="assets/js/libs/TrackballControls.js"></script>
    <script src="assets/js/libs/stats.min.js"></script>
    <script src="assets/js/libs/dat.gui.min.js"></script>

    <!-- Socket stuff -->
    <script src="assets/js/libs/socket.io.min.js"></script>

    <!-- jQuery & Leap Stuff -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//js.leapmotion.com/leap-0.4.2.min.js"></script>

	<script src="assets/js/partials/url.js"></script>
	<script src="assets/js/partials/room.js"></script>
	<script src="assets/js/partials/main.js"></script>
	<script src="assets/js/partials/setup.js"></script>
	<script src="assets/js/partials/leap.js"></script>
	<script src="assets/js/partials/shoot.js"></script>


	<script>


		socket.on('motiondatas', function(data) {
			//if(data.alpha) { setup.phoneObj.rotY = deg2rad(data.alpha); }
			//if(data.beta) { setup.phoneObj.rotX = deg2rad('beta', data.beta) * 5;}
			if(data.gamma) { setup.phoneObj.rotZ = deg2rad('gamma', data.gamma); }

			updateGun();
		});

		socket.on('shoot', function(data) {
        	console.log('shoooooooot');
        });



		function deg2rad(type, angle) {
			var rad =  angle * .017453292519943295;
			return rad;
		}

		function updateGun() {

			try {

		        if(setup.phoneObj.rotZ) { setup.loaded_gun.rotation.z = setup.phoneObj.rotZ; }
		        //if(setup.phoneObj.rotX) { setup.loaded_gun.rotation.x = setup.phoneObj.rotX; }

			} catch (r) {
				console.log('updateGun catch', r);
			}
		}

	</script>

</body>
</html>